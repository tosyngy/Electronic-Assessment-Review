<!-- jQuery -->
<script src="js/jquery.min.js"></script>
<script>
    var ip = 'https://tosyngy.000webhostapp.com';
//    if (window.localStorage.getItem('server'))
//         ip = "http://"+window.localStorage.getItem('server')
    myStorage = window.localStorage;
    if (myStorage.getItem('role') !== "1")
        $(location).attr('href', 'lecturer.html');


</script>
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Task Evaluator</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <meta name="description" content="Free HTML5 Website Template by FreeHTML5.co" />
        <meta name="keywords" content="free html5, free template, free bootstrap, free website template, html5, css3, mobile first, responsive" />
        <meta name="author" content="FreeHTML5.co" />

        <!-- 
              //////////////////////////////////////////////////////
      
              FREE HTML5 TEMPLATE 
              DESIGNED & DEVELOPED by FreeHTML5.co
                      
              Website: 		http://freehtml5.co/
              Email: 			info@freehtml5.co
              Twitter: 		http://twitter.com/fh5co
              Facebook: 		https://www.facebook.com/fh5co
      
              //////////////////////////////////////////////////////
        -->


        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
        <link rel="shortcut icon" href="images/loc.png">

        <!-- <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,400italic,700' rel='stylesheet' type='text/css'> -->

        <!-- Animate.css -->
        <link rel="stylesheet" href="css/animate.css">
        <!-- Icomoon Icon Fonts-->
        <link rel="stylesheet" href="css/icomoon.css">
        <!-- Bootstrap  -->         <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
        <!--<link rel="stylesheet" href="css/bootstrap.min.css">-->
        <!-- Flexslider  -->
        <link rel="stylesheet" href="css/flexslider.css">
        <!-- Theme style  -->
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="js/jqueryUI/jquery-ui.css">
        <!-- Modernizr JS -->
        <script src="js/modernizr-2.6.2.min.js"></script>
        <script src='bootstrap/js/bootstrap.js'></script>
        <link href="bootstrap-fileinput-master/css/fileinput.css" media="all" rel="stylesheet" type="text/css" />
        <script src="bootstrap-fileinput-master/js/fileinput.js" type="text/javascript"></script>
        <script src="js/jTable.js"></script>
        <!-- FOR IE9 below -->
        <!--[if lt IE 9]>
        <script src="js/respond.min.js"></script>
        <![endif]-->

    </head>
    <body>


        <div id="fh5co-page" style="height: 100%">
            <div class="fh5co-contact animate-box">
                <div class="container">
                    <div class="row" >
                        <div class="col-md-12" style="background: #000;padding:5px 0;margin-bottom: 10px">
                            <h5 style="float: right;vertical-align: baseline;padding: 20px"><a href="register.html">Close</a></h5>
                            <h3 style="color: #fff">Task Evaluator</h3>
                        </div>
                        <div class="col-md-8 col-md-push-1 col-sm-12 col-sm-push-0 col-xs-12 col-xs-push-0">
                            <form action="" method="post">
                                <div class="row" style="    padding: 10px 5px;">
                                    <div id="main-content" style="margin-top: 50px;text-align: center">           
                                        <table class="table-responsive  table-hover  " style="margin: auto">
                                            <thead>
                                                <tr class="active" style="padding: 10px;font-size: 16px">
                                                    <th class="col-xs-2" scope="row">S.N</th>
                                                    <th class="col-xs-4">Ass Name</th>
                                                    <th class="col-xs-2">Deadline</th>
                                                    <th class="col-xs-2">View</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tbody">
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <th class="col-xs-2" scope="row">S.N</th>
                                                    <th class="col-xs-4">Task Name</th>
                                                    <th class="col-xs-2">Deadline</th>
                                                    <th class="col-xs-2">View</th>
                                                </tr>
                                            </tfoot>
                                        </table>


                                    </div> 
                                </div>
                            </form>
                        </div>
                    </div>
                </div>	
                <a  class="btn-sm btn-link btn-primary" href="index.html" id="logout">logout</a>
            </div>
        </div>
        <div id="dialog"  title=" name">
            <div class="pricing">
                <div class="col-md-8 col-md-push-1 col-sm-12 col-sm-push-0 col-xs-12 col-xs-push-0">
                    <form action="" method="post">
                        <div class="row" style="    padding: 20% 5px;">
                            <div class="file-loading col-md-6">
                                <input id="file-1" name="file_data" class="file" type="file" data-max-file-count="1" data-show-upload="true" />
                                <input id="file-1" name="file_name" id="filename" />
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input class="form-control" placeholder="Name" required="true" type="text" id="name" />
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input class="form-control" placeholder="Username" required="true" type="text" id="aatric" />
                                </div>
                            </div>

                            <div class="col-md-12 text-center">
                                <div class="form-group">
                                    <input value="Submit" class="btn btn-lg btn-default" style="border-radius: 5px;width: 100%" id="submit" type="submit">
                                </div>


                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <footer id="fh5co-footer" role="contentinfo" style="position: fixed;bottom: 0;">

            <div class="container"  style="text-align: center">

                &copy; 2018 Task Evaluator System. All Rights Reserved. <br/>

                <!--<span>Designed with <i class="icon-heart"></i> by <a href="http://freehtml5.co/" target="_blank">FreeHTML5.co</a> Colored Icons by <a href="https://dribbble.com/TrinhHo" target="_blank">Trinh Ho</a> Demo Images by <a href="http://unsplash.com/" target="_blank">Unsplash</a></span>-->

                <!--                    </div>-->

            </div>
        </footer>
    </div>



</body>
<style>
    .js-fh5co-nav-toggle.fh5co-nav-toggle{
        display: none;
    }
    #fh5co-offcanvas {
        display: none !important;
    }

</style>

<!-- jQuery Easing -->
<script src="js/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="js/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="js/jquery.waypoints.min.js"></script>
<!-- Flexslider -->
<script src="js/jquery.flexslider-min.js"></script>
<script src="js/jqueryUI/jquery-ui.js"></script>

<!-- MAIN JS -->
<script src="js/main.js"></script>
<!--    <script>
        $.getJSON("http://api.ipify.org/?format=json", function(e) {
            alert(e.ip);
        });     
    </script>-->

<script type="text/javascript">

//    var ip = 'http://192.168.1.206';
//    var ip = 'https://tosyngy.000webhostapp.com';
    $(function () {

        $.get(ip + "/ExamServer/assignmentdata.php",
                function (data) {
                    var record = JSON.parse(data);
                    var template = "<tbody id='tbody'>";
                    $.each(record, function (id, item) {
                        template += "<tr><td>" + (id + 1) + "</td>"
                        template += "<td>" + item.title + "</td>"
                        template += "<td class='deadline'>" + item.deadline + "</td>"
                        template += "<td> <i class = 'file-edit-indicator shower glyphicon glyphicon-file text-warning myModal'   title='View Information' data-toggle= 'modal' data='myModal" + item.id + "'> </i>"
                        template += "<div class='modal fade' id='myModal" + item.id + "' tabindex='-1' role='dialog' aria-labelledby='myModalLabel' aria-hidden='true'>";
                        template += "<div class='modal-dialog'>";
                        template += "<div class='modal-content'>";
                        template += "<div class='modal-header'>";
                        template += "<button type='button' class='close' data-dismiss='modal' aria-label='Close'><span aria-hidden='true'>&times;</span></button>";
                        template += "<h4 class='modal-title'>" + item.title + " from " + item.name + "</h4>";
                        template += "</div>";
                        template += "<div class='modal-body'>";
                        template += "<div id='tab-container' class='tab-container'>";
                        template += "<div class='pricing'>";
                        template += " <div class='col-md-8 col-md-push-1 col-sm-12 col-sm-push-0 col-xs-12 col-xs-push-0'>";
                        template += "<div class='row' style=' padding: 20% 5px;'>";
                        template += " <div class='col-md-6'>";
                        template += " <div class='form-group'>";
                        template += "<label class='form-control' placeholder='Username' required='true' type='text' id='matric'>" + localStorage.getItem('userid') + "</label>";
                        template += " </div>";
                        template += " </div>";
                        template += "<div class='col-md-6'>";
                        template += " <div class='form-group'>";
                        template += "   <label class='form-control' placeholder='Name' required='true'  type='datetime-local' id='name'>" + localStorage.getItem('name') + "</label>";
                        template += " </div>";
                        template += "  </div>";

                        template += " <form id='formimage' action='" + ip + "/ExamServer/uploads/upload2.php' method='post' enctype='multipart/form-data'>";
                        template += "<div class='col-md-6'>";
                        template += "<span class = 'input-group-btn' >";
                        template += "<button class = 'btn btn-default' id = 'search' type = 'button' style = 'border: solid thin #888;height: 40px; border-radius:0 5px 5px 0' >";
                        template += "<p> Attached Document: <a id = 'imageid' href='" + ip + "/ExamServer/uploads/" + item.pix + ".pdf' target='__blank' class = 'download'> <i class = 'glyphicon glyphicon-eye-open text-warning'> </i></a> </p>";
                        template += "</button>";
                        template += "</span><hr/>";
                        template += "<label>Select and answer to submit (require: pdf format)</label><br /> <input id='file-1" + item.id + "' name='file_data' class='file' type='file' data-max-file-count='1' data-show-upload='true' />";
                        var imagename = new Date().getTime();
                        template += " </div>";
                        template += "<input id='filename' name='file_name' value='" + imagename + "' type='hidden' />";

                        template += " <input type='submit' value='Upload Image' name='submit' id='imageupload' style='display: none'>";
                        template += "</form>";
                        template += " </div>";

                        template += " </div>";
                        template += " </div>";
                        template += "  </div>";
                        template += " </div>";
                        template += " <div class='modal-footer' >";
                        template += " <button type='button' class='btn btn-default' data-dismiss='modal'>Cancel</button>";
                        template += " <button type='button' id='submitAss' class='btn btn-warning'  value=''>Submit</button>";
                        template += "  </div>";
                        template += " </div>";
                        template += "</div>";
                        template += " </div></td ></tr>";
                    })
                    template += "</tbody>";
                    $("#tbody").replaceWith(template);
                })


        $(document).on("click", ".myModal", function () {
            var tag = $(this).attr("data");
            $("#" + tag).modal("show")
        })




    })
</script>
<script>
    //var ip = 'http://192.168.1.206';
    $(function () {

        $("#logout").click(function (e) {
            e.preventDefault();
            localStorage.removeItem('userid');
            localStorage.removeItem('id');
            localStorage.removeItem('name');
            localStorage.removeItem('role');
            localStorage.removeItem('mobile');
            $(location).attr("href", "index.html")
        })
        $(document).on("click", "#submitAss", function (e) {
            assId = $(".modal.fade.in").attr("id").replace("myModal", "");
            $.post(ip + '/ExamServer/submission.php', {
                userid: window.localStorage.getItem('id'),
                pix: $(".modal.fade.in #filename").val(),
                assId: $(".modal.fade.in").attr("id").replace("myModal", "")
            }, function (data) {
                if (data === 'successful') {
                    $('.modal.fade.in #imageupload').trigger('click');
                    alert('Assessment Saved Successful');
                    $(this).dialog("close");
                } else
                    alert('An Error Occur, Try again')
            })
        })

        $(document).on("click", ".file-edit-indicator.myModal", function (e) {
            e.preventDefault();
            $.post(ip + '/ExamServer/mysubmission.php', {
                id: window.localStorage.getItem('id'),
                assid: $(this).attr("data").replace("myModal", "")
            }, function (data) {
                if (data === "1") {
                    $(".modal-title").append("<br /> SUMMITTED")
                } else {
                    $(".modal-title").append("<br /> NOT SUMMITTED")
                }
            })
            var v = $(this).parents().siblings(".deadline").text();
            var deadline = new Date(v).getTime();
            var now = new Date().getTime();

            if (deadline < now) {
                alert("Submission as Closed on " + $(".deadline").text())
                var mid = $(this).siblings(".modal.fade").attr('id');
//                alert('#' + mid + ' .file')
                $('#' + mid + ' .file').hide()
            }
        })
    })

</script>
<style>
    table, td, th {
        border: 1px solid #337ab7;
        font-size: 12px;
    }

    th {
        background-color: #337ab7 !important;
        color: white;
        text-align: center
    }
    td {
        padding: 5px;
    }
    td {

        vertical-align: bottom;
    }
    tr:hover + td {
        color: #eee;
    }
    .main-links.sidebar img{
        margin: auto;
    }
    input[type="search"] {
        font-size: 16px;
        border-radius: 5px;
        height: 35px;
        width: 80%;
    }
    .main{
        padding: 0;
    }
    select[name='draft_length'] {
        height: 35px;
        border-radius: 5px;
    }
    a.paginate_button:after {
        content: " ";
    }

</style>





</html>

